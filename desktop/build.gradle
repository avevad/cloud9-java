repositories {
    mavenCentral()
}

dependencies {
    compile project(":core")
    implementation "com.formdev:flatlaf:0.41"
}


task mainJar(type: Jar, dependsOn: classes) {
    manifest {
        attributes(
                'Main-Class': 'com.avevad.cloud9.desktop.Main'
        )
    }
    from configurations.runtimeClasspath.collect { it.isDirectory() ? it : zipTree(it) }
    from sourceSets.main.output.classesDirs
    from sourceSets.main.resources
    archiveBaseName.set("cloud9-desktop")
}

task testJar(type: Jar, dependsOn: classes) {
    manifest {
        attributes(
                'Main-Class': 'com.avevad.cloud9.desktop.Test'
        )
    }
    from configurations.runtimeClasspath.collect { it.isDirectory() ? it : zipTree(it) }
    from sourceSets.main.output.classesDirs
    from sourceSets.main.resources
    archiveBaseName.set("cloud9-desktop-test")
}

task mainRun(type: JavaExec, dependsOn: mainJar) {
    classpath = files(tasks.mainJar)
}

task testRun(type: JavaExec, dependsOn: classes) {
    classpath = files(tasks.testJar)
    ignoreExitValue true
}